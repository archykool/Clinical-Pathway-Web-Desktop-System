{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\illness-front\\illness-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\illness-front\\illness-front\\src\\views\\pathSet\\PathDetail.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\illness-front\\illness-front\\src\\views\\pathSet\\PathDetail.vue","mtime":1589038125309},{"path":"C:\\Users\\Administrator\\Desktop\\illness-front\\illness-front\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\illness-front\\illness-front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\illness-front\\illness-front\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\illness-front\\illness-front\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\illness-front\\illness-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\illness-front\\illness-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouYWRkLXRhZy1ncm91cHsKICAgIC5hbnQtaW5wdXR7CiAgICAgICAgYmFja2dyb3VuZDogI0Y3RjlGQSAhaW1wb3J0YW50OwogICAgfQogICAgLmFudC1pbnB1dDpmb2N1c3sKICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmICFpbXBvcnRhbnQ7CiAgICB9CiAgICAuYW50LXNlbGVjdC1zZWxlY3Rpb24tLXNpbmdsZXsKICAgICAgICBiYWNrZ3JvdW5kOiAjRjdGOUZBICFpbXBvcnRhbnQ7CiAgICB9Cn0KLnRhZ0dyb3VwLW1vZGFsewogICAgLmFudC1idG57CiAgICAgICAgbWFyZ2luLXRvcDogMjBweDsKICAgIH0KICAgIC5hbnQtY2FsZW5kYXItcGlja2VyewogICAgICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7CiAgICB9CiAgICAuYW50LWlucHV0LW51bWJlcnsKICAgICAgICB3aWR0aDogMjIwcHg7CiAgICB9Cn0KLnBlcnNvbmFsLW1vZGFsewogICAgLmFudC1idG57CiAgICAgICAgJjpudGgtY2hpbGQoMSl7CiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICAgICAgfQogICAgfQp9CiNkZXRhaWwtZm9ybXsKICAgIC5lbC11cGxvYWRfX2lucHV0ewogICAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICB9CiAgICAuYW50LXRhYmxlewogICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgIHRoewogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgfQogICAgfQogICAgLmNvbnRhaW5lcnsKICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgcGFkZGluZzogMjRweCA5MHB4IDM2cHggOTBweDsKICAgICAgICAuZGVzY3JpcHRpb257CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgIH0KICAgICAgICAuY29uZm9ybS13b3Jkc3sKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IHJvdzsKICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgICAgIH0KICAgIH0KICAgIC5teVRhYmxlewogICAgICAgIHRoLCB0ZHsKICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["PathDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PathDetail.vue","sourceRoot":"src/views/pathSet","sourcesContent":["<template>\r\n    <div id=\"detail-form\">\r\n        <Title :title=\"'路径模板详情'\"/>\r\n        <div class=\"container\">\r\n            <div class=\"conform-words\">\r\n                <div class=\"add-title\">\r\n                    <i class=\"title-icon\"/>\r\n                    路径模板细节\r\n                </div>\r\n                <a-button type=\"link\" icon=\"arrow-left\" @click=\"$router.go(-1)\">返回路径配置模块</a-button>\r\n            </div>\r\n            <div class=\"description\">\r\n                <a-descriptions layout=\"vertical\" bordered>\r\n                    <a-descriptions-item label=\"路径名称\">{{detailInfo.pathName || '-'}}</a-descriptions-item>\r\n                    <a-descriptions-item label=\"疾病编码\">{{detailInfo.pathCode || '-'}}</a-descriptions-item>\r\n                    <a-descriptions-item label=\"入院科室\">{{detailInfo.pathDept || '-'}}</a-descriptions-item>\r\n                    <a-descriptions-item label=\"入径条件\">{{detailInfo.pathReq || '-'}}</a-descriptions-item>\r\n                    <a-descriptions-item label=\"标准住院日\">{{detailInfo.pathSlos || '-'}}</a-descriptions-item>\r\n                    <a-descriptions-item label=\"创建人\" :span=\"3\">{{detailInfo.pathCrtstaff || '-'}}</a-descriptions-item>\r\n                </a-descriptions>\r\n            </div>\r\n           <div class=\"box-container\">\r\n               <div class=\"conform-words\" style=\"margin-top: 30px;\">\r\n                   <div class=\"add-title\">\r\n                       <i class=\"title-icon\"/>\r\n                       环节定义\r\n                   </div>\r\n               </div>\r\n               <div class=\"table-area\">\r\n                   <a-button icon=\"plus\" @click=\"addNewPath\">新增环节</a-button>\r\n                   <el-table\r\n                           :data=\"tableData\"\r\n                           border\r\n                           class=\"myTable\"\r\n                           style=\"max-height: 700px; margin-top: 20px;text-align: center;\">\r\n                       <el-table-column\r\n                               prop=\"pathsegDa\"\r\n                               label=\"天数\"\r\n                               >\r\n                           <template slot-scope=\"scope\">\r\n                               <span>{{'第' + scope.row.pathsegDay + '天'}}</span>\r\n                           </template>\r\n                       </el-table-column>\r\n                       <el-table-column\r\n                               label=\"操作\"\r\n                               width=\"300\">\r\n                           <template slot-scope=\"scope\">\r\n                               <a-button icon=\"search\" type=\"link\" style=\"margin-right: 20px;\" @click=\"showContent(scope.row)\"/>\r\n                               <a-button icon=\"edit\" type=\"link\" style=\"margin-right: 20px;\" @click=\"editPath(scope.row)\"/>\r\n                               <a-button icon=\"delete\" type=\"link\" style=\"color: red;\" @click=\"deletePath(scope.row)\"/>\r\n                           </template>\r\n                       </el-table-column>\r\n                   </el-table>\r\n               </div>\r\n           </div>\r\n            <div class=\"box-container\">\r\n                <div class=\"conform-words\" style=\"margin-top: 30px;\">\r\n                    <div class=\"add-title\">\r\n                        <i class=\"title-icon\"/>\r\n                        诊疗内容\r\n                    </div>\r\n                </div>\r\n                <div class=\"table-area\">\r\n                    <a-button icon=\"plus\" @click=\"addNewContent\">新增内容</a-button>\r\n                    <el-table\r\n                            :data=\"tableData1\"\r\n                            border\r\n                            class=\"myTable\"\r\n                            style=\"max-height: 700px; margin-top: 20px;text-align: center;\">\r\n                        <el-table-column\r\n                                prop=\"itemCat\"\r\n                                label=\"诊疗类别名称\"\r\n                        >\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                                prop=\"itemName\"\r\n                                label=\"项目名称\"\r\n                        >\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                                label=\"操作\"\r\n                                width=\"300\">\r\n                            <template slot-scope=\"scope\">\r\n                                <a-button icon=\"edit\" type=\"link\" style=\"margin-right: 20px;\" @click=\"editNewContent(scope.row)\"/>\r\n                                <a-button icon=\"delete\" type=\"link\" style=\"color: red;\" @click=\"deleteContent(scope.row)\"/>\r\n                            </template>\r\n                        </el-table-column>\r\n                    </el-table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <a-modal :title=\"modalTitle\"\r\n                 v-model=\"visible\"\r\n                 @ok=\"handleOk\"\r\n                 :class=\"['common-modal', 'tagGroup-modal']\"\r\n                 :destroyOnClose=\"true\"\r\n                 :keyboard=\"true\"\r\n                 :maskClosable=\"false\"\r\n                 :okText=\"'确认'\"\r\n                 :cancelText=\"'取消'\"\r\n                 :confirmLoading=\"confirmLoading\">\r\n            <div class=\"add-tag-group\" v-if=\"!showHeader\">\r\n                <a-form :form=\"form\">\r\n                    <a-col :span=\"24\">\r\n                        <a-form-item label=\"天数\"\r\n                                     :label-col=\"formItemLayout.labelCol\"\r\n                                     :wrapper-col=\"formItemLayout.wrapperCol\">\r\n                            <a-input-number v-decorator=\"[\r\n                                             'pathsegDay',\r\n                                             {   initialValue: editInfo.pathsegDay || undefined,\r\n                                                 rules: [\r\n                                                 {   required: true, message: '请选择天数!' }] }\r\n                                                ]\"\r\n                                     placeholder=\"请选择天数\">\r\n                            </a-input-number>\r\n                        </a-form-item>\r\n                    </a-col>\r\n                </a-form>\r\n            </div>\r\n            <div class=\"add-tag-group\" v-if=\"showHeader\">\r\n                <a-form :form=\"form\">\r\n                    <a-col :span=\"24\">\r\n                        <a-form-item label=\"诊疗类别名称\"\r\n                                     :label-col=\"formItemLayout.labelCol\"\r\n                                     :wrapper-col=\"formItemLayout.wrapperCol\">\r\n                            <a-select\r\n                                    v-decorator=\"[\r\n                                                              'itemCat',\r\n                                                              {    initialValue: editInfo.itemCat || undefined,\r\n                                                                   rules: [\r\n                                                                             {   required: true, message: '请选择诊疗类别名称!' }]\r\n                                                              }\r\n                                                            ]\"\r\n                                    placeholder=\"请选择诊疗类别名称\"\r\n                            >\r\n                                <a-select-option  v-for=\"item in selectValue\" :value=\"item.name\" :key=\"item.id\">\r\n                                    {{item.name}}\r\n                                </a-select-option>\r\n                            </a-select>\r\n                        </a-form-item>\r\n                    </a-col>\r\n                    <a-col :span=\"24\">\r\n                        <a-form-item label=\"项目名称\"\r\n                                     :label-col=\"formItemLayout.labelCol\"\r\n                                     :wrapper-col=\"formItemLayout.wrapperCol\">\r\n                            <a-input v-decorator=\"[\r\n                                             'itemName',\r\n                                             {   initialValue: editInfo.itemName || undefined,\r\n                                                 rules: [\r\n                                                 {   required: true, message: '请输入项目名称!' }] }\r\n                                                ]\"\r\n                                            placeholder=\"请输入项目名称\">\r\n                            </a-input>\r\n                        </a-form-item>\r\n                    </a-col>\r\n                </a-form>\r\n            </div>\r\n        </a-modal>\r\n    </div>\r\n</template>\r\n\r\n<script type=\"text/jsx\">\r\n    import Title from '@/components/contentTitle';\r\n    import { Modal } from \"ant-design-vue\";\r\n    import {\r\n        reqAddDay, reqAddTreatment,\r\n        reqContentByDay, reqDeleteDay,\r\n        reqDeleteTreatment, reqPathDetailList,\r\n        reqUpdateDay, reqUpdateTreatment\r\n    } from \"../../api/main\";\r\n\r\n    export default {\r\n        name: \"PathDetail\",\r\n        data () {\r\n            return {\r\n                confirmLoading: false,\r\n                form: this.$form.createForm(this),\r\n                detailInfo: {},\r\n                visible: false,\r\n                selectValue: [{\r\n                    id: 1,\r\n                    name: '主要诊疗工作'\r\n                }, {\r\n                    id: 2,\r\n                    name: '长期医嘱'\r\n                }, {\r\n                    id: 3,\r\n                    name: '临时医嘱'\r\n                }, {\r\n                    id: 4,\r\n                    name: '主要工作护理'\r\n                }],\r\n                editInfo: {},\r\n                pathDayId: '',\r\n                modalTitle: '新增环节',\r\n                showHeader: false,\r\n                tableData: [],\r\n                tableData1: [],\r\n                formItemLayout: {\r\n                    labelCol: { span: 7 },\r\n                    wrapperCol: { span: 14 }\r\n                },\r\n            }\r\n        },\r\n        methods: {\r\n            async getDetailList () {\r\n                const result = await reqPathDetailList({\r\n                    pathID: this.$route.query.pathID\r\n                });\r\n\r\n                const { code, message ,messageBody } = result.data;\r\n\r\n                if (code === 0){\r\n                    this.detailInfo = messageBody.title;\r\n                    this.tableData = messageBody.content;\r\n                } else {\r\n                    this.$message.error(message);\r\n                }\r\n            },\r\n            showContent (day) {\r\n              this.pathDayId = day.pathsegID;\r\n              this.getContent();\r\n            },\r\n            async getContent () {\r\n                const result = await reqContentByDay({\r\n                    pathsegID: this.pathDayId\r\n                });\r\n\r\n                const { code, message, messageBody } = result.data;\r\n\r\n                if (code === 0){\r\n                    this.tableData1 = messageBody;\r\n                } else {\r\n                    this.$message.error(message);\r\n                }\r\n            },\r\n            confirm () {\r\n\r\n            },\r\n            handleOk () {\r\n                this.form.validateFields(async (err, values) => {\r\n                   if (err){\r\n                    return false;\r\n                   }\r\n\r\n                   this.confirmLoading = true;\r\n\r\n                   if (!this.showHeader){\r\n                     if (!this.editInfo.pathsegID){\r\n                         const result = await reqAddDay({\r\n                             pathID: this.$route.query.pathID,\r\n                             ...values\r\n                         });\r\n\r\n                         const { code, message } = result.data;\r\n\r\n                         code === 0 && this.$message.success(message) && this.getDetailList();\r\n                         code !== 0 && this.$message.error(message);\r\n\r\n                     } else {\r\n                         const result = await reqUpdateDay({\r\n                             pathsegID: this.editInfo.pathsegID,\r\n                             ...values\r\n                         });\r\n\r\n                         const { code, message } = result.data;\r\n\r\n                         code === 0 && this.$message.success(message) && this.getDetailList();\r\n                         code !== 0 && this.$message.error(message);\r\n\r\n                     }\r\n                       this.confirmLoading = false;\r\n                       this.visible = false;\r\n                   } else {\r\n                       if (!this.editInfo.itemID){\r\n                           const result = await reqAddTreatment({\r\n                               pathsegID: this.pathDayId,\r\n                               ...values\r\n                           });\r\n\r\n                           const { code, message } = result.data;\r\n\r\n                           code === 0 && this.$message.success(message) && this.getContent();\r\n                           code !== 0 && this.$message.error(message);\r\n\r\n                       } else {\r\n                           values.itemID = this.editInfo.itemID;\r\n                           const result = await reqUpdateTreatment({\r\n                               ...values\r\n                           });\r\n\r\n                           const { code, message } = result.data;\r\n\r\n                           code === 0 && this.$message.success(message) && this.getContent();\r\n                           code !== 0 && this.$message.error(message);\r\n\r\n                       }\r\n                       this.confirmLoading = false;\r\n                       this.visible = false;\r\n                   }\r\n                });\r\n            },\r\n            addNewPath () {\r\n                this.editInfo = {};\r\n                this.modalTitle = \"新增环节\";\r\n                this.showHeader = false;\r\n                this.visible = true;\r\n            },\r\n            editPath (day) {\r\n                this.modalTitle = '修改环节';\r\n                this.showHeader = false;\r\n                this.editInfo = day;\r\n                this.visible = true;\r\n            },\r\n            addNewContent () {\r\n                this.editInfo = {};\r\n                this.showHeader = true;\r\n                this.modalTitle = \"新增内容\";\r\n                this.visible = true;\r\n            },\r\n            editNewContent (content) {\r\n                this.editInfo = content;\r\n                this.showHeader = true;\r\n                this.modalTitle = \"修改内容\";\r\n                this.visible = true;\r\n            },\r\n            deletePath (day) {\r\n                Modal.confirm({\r\n                    title: '删除环节',\r\n                    content: '确定要删除该环节吗?',\r\n                    okText: '确认',\r\n                    cancelText: '取消',\r\n                    onOk: async () => {\r\n                        const result = await reqDeleteDay({\r\n                            pathsegID: day.pathsegID,\r\n                        });\r\n\r\n                        const { code, message } = result.data;\r\n\r\n                        code === 0 && this.$message.success(message) && this.getDetailList();\r\n                        code !== 0 && this.$message.error(message);\r\n                    }\r\n                })\r\n            },\r\n            deleteContent (content) {\r\n                Modal.confirm({\r\n                    title: '删除内容',\r\n                    content: '确定要删除该内容吗?',\r\n                    okText: '确认',\r\n                    cancelText: '取消',\r\n                    onOk: async () => {\r\n                        const result = await reqDeleteTreatment({\r\n                            itemID: content.itemID,\r\n                        });\r\n\r\n                        const { code, message } = result.data;\r\n\r\n                        code === 0 && this.$message.success(message) && this.getContent();\r\n                        code !== 0 && this.$message.error(message);\r\n                    }\r\n                })\r\n            }\r\n\r\n        },\r\n        filters: {\r\n\r\n        },\r\n        components: {\r\n            Title\r\n        },\r\n        mounted() {\r\n            this.getDetailList();\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\">\r\n    .add-tag-group{\r\n        .ant-input{\r\n            background: #F7F9FA !important;\r\n        }\r\n        .ant-input:focus{\r\n            background: #ffffff !important;\r\n        }\r\n        .ant-select-selection--single{\r\n            background: #F7F9FA !important;\r\n        }\r\n    }\r\n    .tagGroup-modal{\r\n        .ant-btn{\r\n            margin-top: 20px;\r\n        }\r\n        .ant-calendar-picker{\r\n            width: 100% !important;\r\n        }\r\n        .ant-input-number{\r\n            width: 220px;\r\n        }\r\n    }\r\n    .personal-modal{\r\n        .ant-btn{\r\n            &:nth-child(1){\r\n                display: none;\r\n            }\r\n        }\r\n    }\r\n    #detail-form{\r\n        .el-upload__input{\r\n            display: none;\r\n        }\r\n        .ant-table{\r\n            width: 100%;\r\n            th{\r\n                text-align: center;\r\n            }\r\n        }\r\n        .container{\r\n            display: flex;\r\n            flex-direction: column;\r\n            padding: 24px 90px 36px 90px;\r\n            .description{\r\n                width: 100%;\r\n            }\r\n            .conform-words{\r\n                display: flex;\r\n                flex-direction: row;\r\n                justify-content: space-between;\r\n            }\r\n        }\r\n        .myTable{\r\n            th, td{\r\n                text-align: center;\r\n            }\r\n        }\r\n    }\r\n</style>\r\n"]}]}